# CARDS
Это многопользовательская игра, разработанная на Django, позволяющая игрокам коллекционировать, улучшать и использовать карты персонажей в различных PvP-активностях. Также пользователи могут объединяться в гильдии, торговать картами друг с другом и отслеживать успехи других игроков.

## Карты
* **Редкость.** Карты представлены тремя уровнями редкости со своими особенностями:

	| Редкость | Шанс выпадения | Максимальный уровень | Базовое здоровье | Базовый урон | Здоровье за уровень | Урон за уровень |
	|----------|----------------|----------------------|------------------|--------------|---------------------|-----------------|
	| R        |       70%      |         20           |      10 - 15     |     1 - 7    | +10                 |         +1      |
    | SR       |       27%      |         25           |      12 - 17     |     3 - 10   | +12                 |         +2      |
    | UR       |       3%       |         30           |      15 - 20     |     7 - 14   | +15                 |         +3      |


* **Класс.** В игре представлено 6 классов карт, каждый из которых обладает уникальными способностями, влияющими на игровой процесс и зависящими от уровня слияния карты:
	- Оборотень. С вероятностью 50+3\*ур.слияния% восстанавливает при атаке свое здоровье в размере 80+2\*ур.слияния% от своей атаки.
	- Бог Император. После удара противника этот персонаж возвращает 60+3*ур.слияния% полученного базового урона.
	- Призрак. С вероятностью 25+2.5*ур.слияния% призрак может полностью избежать базовый вражеский урон при атаке.
	- Демон. Во время своего хода демон с вероятностью 25% может нанести дополнительный урон равный 90+5*ур.слияния% от своей атаки.
	- Дриада. Перед каждой атакой противника дриада восстанавливает/увеличивает свое здоровье на 7+5*ур.слияния единиц.
    - Эльф. С помощью провиденья эльф повышает шанс выпадения всех наград после битвы на 50+4*ур.слияния%.

* **Тип.** В бою важную роль играет правильный выбор противника. Карты делятся на три типа: Красный > Зелёный > Синий > Красный. Если карта имеет преимущество типа над другой, то она получает +20% к базовому урону и -20% к получаемому базовому урону от противника.

* **Уровень.** Каждая карта вступая в рейтинговую битву получает опыт. Опыт можно получить и использовав специальные книги. При получении необходимого количества опыта повышается уровень. Количество опыта для увеличения уровня рассчитывается по формуле 1000 + 100 * 1.15^уровень. Получаемые усиления описаны в редкости.

* **Амулеты.** На любую карту можно надеть амулет, если он есть у пользователя. Надетый амулет дает бонусы к характеристикам урона и здоровья выбранной карте. Некоторые амулеты уменьшают здоровье или урон взамен давая более сильные бонусы к другому атрибуту. Амулеты можно купить, получить в награду в событии или после боя с маленьким шансом.

* **Предметы улучшения.** Каждую карту можно улучшить с помощью специальных предметов до 20 раз. Всего есть 3 типа таких предметов: увеличивает здоровье, увеличивает урон и увеличивает случайную характеристику, но на большее значение, чем другие 2.

* **Слияние.** Если у пользователя есть дубликаты карт (с одинаковым классом, типом и редкостью), то их можно слить, улучшая способности карты (описано в классах)

## Магазин
В игре есть магазин, в котором за внутриигровую валюту пользователи могут купить карты разных редкости, типа и класса, амулеты, предметы улучшения, книги опыта, а также сундуки с картами, книгами и амулетами.
* **GOLD.** Это валюта, которая используется для покупок в магазине и торговой площадке, а так же для прокачки карт. Чтобы зарабатывать gold, пользователи могут бросать вызов другим пользователям, продавать свои карты на торговой площадке и продавать ненужные амулеты.

* **DIAMOND.** Еще одна валюта, которую пока что можно получить только в боевом событии.

* **Карты.** В магазине представлены карты с уже известными редкостью, типом, классом и характеристиками.

* **Предметы опыта.** В магазине можно купить книги опыта (большая UR, средняя SR и маленькая R), чтобы ускорить получение максимального уровня карты.

* **Амулеты.** Для покупки доступны многие существующие в игре амулеты. Если пользователю не нужен амулет, он может его продать за 70% от цены.

* **Сундуки.** В магазине помимо обычных предметов можно приобрести сундуки, которые содержат различные награды:
  - Сундук опыта. Содержит в себе 10 книг опыта, 1 из которых гарантированно будет редкости UR.
  - Сундук амулетов. Содержит 5 случайных амулетов. Помимо SR и R амулетов, которые можно купить в магазине или получить в награду за бой, здесь могут выпасть особые UR амулеты такие как "Ловец снов" и "Кроличья лапка".
  - Сундук с UR картой. Содержит 1 UR карту случайного класса и типа с максимально возможным значением начального здоровья или урона.


## Бой
* **Противник.** Пользователи могут бросать друг другу вызов в рейтинговых боях. Для этого у обоих игроков должна быть избранная карта, которая вступит в бой. Одному и тому же пользователю можно бросать вызов каждые 6 часов.

* **Прогресс.** После каждого нападения пользователь получает опыт и gold, а также он имеет шанс получить в награду книги опыта и амулеты.

## Игровые события
В игре есть различные игровые события, предназначенные для поощрения активности пользователей и вовлечения их в игровой процесс.
* **Бесплатное получение карты.** Каждые 6 часов все пользователи могут получить случайную карту бесплатно. 

* **Стартовое событие.** После первого входа в игру пользователи могут отмечаться каждый день в событии и получать награды, всего можно получить 30 наград. Среди наград: золото, книги опыта, карты разной редкости с максимальными базовыми характеристиками, а также уникальный амулет "Корона Завоеваний".

* **Боевое событие.** Ежемесячный Командный Турнир (1-10 числа каждого месяца): Игроки формируют команды из 3 карт, ежедневно сражаются с новым противником из числа участников (по одной попытке в день), зарабатывая очки за результат, а топ-5 игроков получают особую награду.

* **Новости.** Каждое событие игры анонсируется для всех игроков.

## Пользователи
* **Торговля картами.** Все пользователи могут выставлять на продажу свои карты за любую цену, которую они посчитают приемлемой и все пользователи могут ее купить при наличии достаточных средств.

* **Рейтинг.** На сайте есть таблица рейтинга, в которой находятся самые сильные пользователи, с самой большой долей побед среди всех.

* **Гильдии.** Каждый пользователь может вступить в гильдию или создать ее, заплатив 50 000 золота. У каждой гильдии есть свое усиление, которое помогает в развитии пользователя. Усиление можно сменить не чаще 1 раза в 2 недели. Также если участники боя состоят в гильдиях, им начисляются очки гильдии, которые засчитываются в общий рейтинг гильдии. Если пользователь покинет свою гильдию, то все полученные очки обнуляются.

* **Избранные пользователи.** Игроки могут добавлять других пользователей в избранное. Это позволяет удобно отслеживать успехи интересующих игроков или бросать им вызов.

* **Коллекция.** Информацию обо всех существующих картах можно найти в соответствующем разделе сайта.

## Профиль
* **Профиль пользователя.** Чтобы заявить о себе и показать другим кого стоит бояться, игроки могут установить картинку профиля и статус, которые будут видны всем.

* **Статистика боев.** При просмотре профиля пользователя можно просмотреть его статистику по победам и поражениям, в том числе против авторизированного пользователя. Эта полезная информация всегда доступна при просмотре чужого профиля.
 
* **История боев.** В своем профиле игрок может просмотреть историю своих последних 100 боев. В ней есть информация о победителе и проигравшем и о картах, участвовавших в бою.

* **История транзакций.** При необходимости пользователь имеет возможность просмотреть историю всех операций с валютой, производимых на сайте.

* **Инвентарь.** Все доступные предметы опыта, предметы улучшений и амулеты можно просмотреть в своем инвентаре. Там же можно продать или использовать все при необходимости.

# Установка и запуск

1. Клонируйте репозиторий
2. Создайте и активируйте виртуальное окружение
3. Установите необходимые библиотеки requirements.txt
	```bash
	pip install -r reqirements.txt
	```
4. Создайте чистую базу данных и пользователя для работы с ней. Проект настроен на работу с базой данных PostgreSQL
5. Создайте файл .env по примеру .env_example
6. Сделайте миграции. Файл manage.py находится в директории omg
    ```bash
    python manage.py makemigrations
    python manage.py migrate
    ```
7. Запустите команды для заполнения базы данных необходимыми данными
    ```bash
    python manage.py pop_cards
    python manage.py pop_users
  	python manage.py pop_exch
    ```
8. При желании создайте суперпользователя для доступа к панели администратора. Дать права суперпользователя можно и позже в базе данных
   ```bash
   python manage.py createsuperuser
   ```
9. Запустите проект. По умолчанию сайт работает на [localhost](http://127.0.0.1:8000/), а режим работы установлен на debug.
	```bash
	python manage.py runserver
	```

Python 3.10, Django, PostgreSQL, Pillow, pytz, sqlparse, tzdata
